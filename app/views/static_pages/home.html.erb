<div class="d-sm-flex align-items-center justify-content-between mb-4 header">
  <h5 class="mb-2 text-gray-800 font-weight-bold">Bài viết hàng đầu</h4>
</div>

<div class="row">
  <% @posts.each do |post| %>
    <div class="col-xl-6 col-md-6 mb-2">
      <div class="h-100 py-2">
        <div class="card-body">
          <div class="row no-gutters mb-1">
            <div class="col-xl-12">
              <a href="<%= post.url %>" target="_blank">
                <div class="font-weight-bold mb-1">
                  <%= post.title %>
                </div>
              </a>
            </div>
            <% if post.image.present? %>
              <div class="col-xl-3">
                <a href="<%= post.url %>" target="_blank">
                  <img src="<%= post.image %>" alt="<%= post.title %>" class="card-body-img mt-1 border-0">
                </a>
              </div>
              <div class="col-xl-9">
                <div class="mb-1 justify-content-center"><%= post.description %></div>
                <div class="mb-1">
                  <img src="<%= post.source.icon %>" width="13px" height="13px" class="mb-1">
                  <span class="small">
                    <%= post.source.name %> - 
                    <% if (Time.now - post.publish_date) / 3600 < 1 %>
                      <%= ((Time.now - post.publish_date) / 60).to_i %> phút trước
                    <% elsif (Time.now - post.publish_date) / 3600 < 24 %>
                      <%= ((Time.now - post.publish_date) / 3600).to_i %> giờ trước
                    <% else %>
                      Hôm qua
                    <% end %>
                  </span>
                  <div role="button" class="card-button card-bookmark" data-toggle="tooltip" data-placement="bottom" data-post_id=<%= post.id %> title="Lưu bài viết">
                    <% bookmarked = post.bookmarks.find { |bookmark| bookmark.user_id == current_user.id} %>
                    <% if bookmarked %>
                      <i class="fas fa-fw fa-bookmark card-bookmark-true"></i>
                    <% else %>
                      <i class="far fa-fw fa-bookmark card-bookmark-false"></i> 
                    <% end %>
                  </div>
                </div>
              </div>
            <% else %>
              <div class="col-xl-12">
                <div class="mb-0"><%= post.description %></div>
                <div class="mb-1">
                  <img src="<%= post.source.icon %>" width="15px" height="15px" class="mb-1">
                  <span class="small">
                    <%= post.source.name %> - 
                    <% if (Time.now - post.publish_date) / 3600 < 1 %>
                      <%= ((Time.now - post.publish_date) / 60).to_i %> phút trước
                    <% elsif (Time.now - post.publish_date) / 3600 < 24 %>
                      <%= ((Time.now - post.publish_date) / 3600).to_i %> giờ trước
                    <% else %>
                      Hôm qua
                    <% end %>
                  </span>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <%end %>
</div>
